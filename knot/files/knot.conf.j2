{%- set knot = salt['pillar.get']('knot') %}
# Knot DNS configuration file
#
# **** DO NOT EDIT THIS FILE ****
#
# This file is managed by Salt.

{%- macro ouput_knot_section(section_name, first_param_name="") -%}
  {%- if knot[section_name] is defined %}
{{ section_name }}:
    {%- for block_name, block_var in knot[section_name].items() %}
      {%- if block_var is string %}
  {{ block_name }}: {{ block_var }}
      {%- else %}
        {%- if first_param_name != "" %}
  - {{ first_param_name }}: {{ block_name }}
        {%- endif %}
        {%- for param_name, param_value in block_var.items() %}
          {%- if param_value | is_list %}
    {{ param_name }}: {{ param_value | tojson }}
          {%- else %}
    {{ param_name }}: {{ param_value }}
          {%- endif %}
        {%- endfor %}
      {%- endif %}
    {%- endfor %}
  {%- endif %}
{%- endmacro %}

{{- ouput_knot_section('module', 'id') }}

{{- ouput_knot_section('server') }}

{{- ouput_knot_section('log', 'target') }}

{{- ouput_knot_section('key', 'id') }}

{{- ouput_knot_section('remote', 'id') }}

{{- ouput_knot_section('acl', 'id') }}

{{- ouput_knot_section('control') }}

{{- ouput_knot_section('statistics') }}

{{- ouput_knot_section('database') }}

{{- ouput_knot_section('keystore', 'id') }}

{{- ouput_knot_section('submission', 'id') }}

{{- ouput_knot_section('policy', 'id') }}

{{- ouput_knot_section('template', 'id') }}

{{- ouput_knot_section('mod-synthrecord', 'id') }}

{{- ouput_knot_section('zone', 'domain') }}
